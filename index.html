<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fanatec Birthday - Volant</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; margin: 0; padding: 20px; }
        
        .main-card { 
            display: inline-block;
            margin: auto; background: #262626; padding: 20px; border-radius: 15px; 
        }
        
        .gift-wrapper { position: relative; display: inline-block; line-height: 0; width: 100%; }
        
        /* Obr√°zek se zobraz√≠ ve sv√© p≈ôirozen√© velikosti */
        .gift-image { 
            width: 100%; height: auto; 
            border-radius: 8px; display: block;
        }
        
        /* Styly z√≥n */
        .zone {
            position: absolute; box-sizing: border-box;
            /* Nech√°v√°m je zat√≠m viditeln√© pro kontrolu pozice */
            border: 2px solid rgba(255, 0, 0, 0.5); background: rgba(255, 0, 0, 0.1);
            cursor: pointer; z-index: 100; transition: 0.3s;
        }
        /* Po kliknut√≠ zezelenaj√≠ */
        .zone.selected { border-color: #00ff00; background: rgba(0, 255, 0, 0.3); }

        .price-display { font-size: 3em; color: #00ff00; margin: 20px 0; }
        
        #qr-container { 
            background: white; padding: 20px; border-radius: 10px; 
            display: none; margin: 20px auto; width: 256px;
        }
        #qrcode { margin: auto; }
        
        .footer { color: #888; font-size: 0.9em; margin-top: 20px; }
    </style>
</head>
<body>

<div class="main-card">
    <h2>Vyber mi ƒç√°st d√°rku! üèéÔ∏è</h2>
    <p>Klikni na tlaƒç√≠tka "P≈ôidej!" nebo "Brzdi!" v obr√°zku.</p>
    
    <div class="gift-wrapper">
        <img src="volant.jpg" class="gift-image" alt="Fanatec Setup">

        <div class="zone" data-price="1000" style="top: 22%; left: 75%; width: 18%; height: 7%;"></div>
        
        <div class="zone" data-price="500" style="top: 85%; left: 65%; width: 18%; height: 7%;"></div>
        
    </div>

    <div class="price-display"><span id="total">0</span> Kƒç</div>
    
    <div id="qr-container">
        <div id="qrcode"></div>
        <p style="color: black; font-size: 12px; margin-top: 10px; margin-bottom: 0;">Naskenuj v bankovn√≠ aplikaci</p>
    </div>

    <div class="footer">
        √öƒçet: <strong>CZ11 6210 6701 0022 0036 4123</strong><br>
        Zpr√°va: <strong>Narozeniny</strong>
    </div>
</div>

<script>
    const zones = document.querySelectorAll('.zone');
    const totalEl = document.getElementById('total');
    const qrContainer = document.getElementById('qr-container');
    const qrcodeDiv = document.getElementById('qrcode');
    
    const IBAN = "CZ1162106701002200364123";
    const MSG = "Narozeniny";

    // Inicializace lok√°ln√≠ho gener√°toru
    const qrGenerator = new QRCode(qrcodeDiv, {
        width: 256,
        height: 256,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.M
    });

    zones.forEach(zone => {
        zone.onclick = function() {
            this.classList.toggle('selected');
            
            let sum = 0;
            document.querySelectorAll('.zone.selected').forEach(s => {
                sum += parseInt(s.getAttribute('data-price'));
            });

            totalEl.innerText = sum;

            if (sum > 0) {
                // ƒåesk√Ω standard SPAYD
                const spayd = `SPD*1.0*ACC:${IBAN}*AM:${sum}.00*CC:CZK*MSG:${MSG}`;
                
                qrGenerator.clear(); 
                qrGenerator.makeCode(spayd);
                
                qrContainer.style.display = 'block';
            } else {
                qrContainer.style.display = 'none';
            }
        };
    });
</script>

</body>
</html>
