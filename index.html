<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fanatec Birthday - Increment App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body, html {
            height: 100%; margin: 0; padding: 0;
            background: #1a1a1a; color: white;
            font-family: sans-serif;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center;
        }

        .header { flex: 0 0 auto; padding: 10px; }

        .gift-wrapper {
            position: relative;
            display: inline-block;
            line-height: 0;
            max-height: 70vh; max-width: 95vw;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .gift-image {
            display: block; width: auto; height: auto;
            max-width: 100%; max-height: 100%;
        }

        /* --- CENA V TACHOMETRU --- */
        .price-display-in-image {
            position: absolute;
            z-index: 20;
            color: #00ff00;
            font-weight: bold;
            text-align: center;
            white-space: nowrap;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
            
            /* Horizont√°ln√≠ st≈ôed tachometru */
            left: 16.5%; 
            /* Vertik√°ln√≠ st≈ôed mezi textem a spodkem bud√≠ku */
            top: 89%;  
            
            transform: translate(-50%, -50%);
            font-size: clamp(1em, 4vw, 2.5em);
            pointer-events: none; /* Aby nebr√°nilo klik√°n√≠ pod sebe */
        }

        /* TLAƒå√çTKA (Z√ìNY) */
        .btn-zone {
            position: absolute; box-sizing: border-box;
            border: 2px solid rgba(255, 255, 255, 0.2); 
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer; z-index: 10; transition: 0.1s;
        }
        /* Efekt stisknut√≠ */
        .btn-zone:active {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0.98);
        }

        .ui-footer {
            flex: 0 0 auto; padding: 15px; width: 100%; box-sizing: border-box;
        }

        #qr-container {
            background: white; padding: 10px; border-radius: 10px;
            display: none; margin: 0 auto 10px auto; width: 160px;
        }
        #qrcode img { margin: auto; }
        .iban-info { color: #888; font-size: 0.8em; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin: 5px 0;">Sestav mi d√°rek! üèéÔ∏è</h2>
        <p style="margin: 0; font-size: 0.9em; color: #bbb;">Pou≈æij tlaƒç√≠tka v obr√°zku pro nastaven√≠ ƒç√°stky</p>
    </div>

    <div class="gift-wrapper">
        <img src="volant.jpg" class="gift-image" alt="Fanatec Setup">
        
        <div class="price-display-in-image">
            <span id="total">0</span> Kƒç
        </div>

        <div id="btn-add" class="btn-zone" style="top: 23%; left: 74%; width: 20%; height: 7%;"></div>
        
        <div id="btn-sub" class="btn-zone" style="top: 84%; left: 63%; width: 22%; height: 8%;"></div>
    </div>

    <div class="ui-footer">
        <div id="qr-container">
            <div id="qrcode"></div>
            <p style="color: black; font-size: 10px; margin: 5px 0 0 0;">Naskenuj a zapla≈•</p>
        </div>

        <div class="iban-info">
            CZ11 6210 6701 0022 0036 4123 (Narozeniny)
        </div>
    </div>

<script>
    let currentTotal = 0;
    const totalEl = document.getElementById('total');
    const qrContainer = document.getElementById('qr-container');
    const qrcodeDiv = document.getElementById('qrcode');
    
    const IBAN = "CZ1162106701002200364123";
    const MSG = "Narozeniny";

    // Inicializace QR gener√°toru
    const qrGenerator = new QRCode(qrcodeDiv, {
        width: 160, height: 160,
        colorDark : "#000000", colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.M
    });

    function updateDisplay() {
        totalEl.innerText = currentTotal;

        if (currentTotal > 0) {
            const spayd = `SPD*1.0*ACC:${IBAN}*AM:${currentTotal}.00*CC:CZK*MSG:${MSG}`;
            qrGenerator.clear(); 
            qrGenerator.makeCode(spayd);
            qrContainer.style.display = 'block';
        } else {
            qrContainer.style.display = 'none';
        }
    }

    // Logika tlaƒç√≠tek
    document.getElementById('btn-add').onclick = function() {
        currentTotal += 100;
        updateDisplay();
    };

    document.getElementById('btn-sub').onclick = function() {
        // Sn√≠≈æ√≠ o 100, ale nepust√≠ pod nulu
        currentTotal = Math.max(0, currentTotal - 100);
        updateDisplay();
    };
</script>

</body>
</html>
