<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fanatec Birthday - Full Screen</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* Odstranƒõn√≠ okraj≈Ø a nastaven√≠ tmav√©ho pozad√≠ */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            background: #1a1a1a;
            color: white;
            font-family: sans-serif;
            text-align: center;
            overflow-x: hidden;
        }

        /* Hlavn√≠ kontejner, kter√Ω dr≈æ√≠ v≈°e pohromadƒõ */
        .page-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        /* Dynamick√Ω wrapper pro obr√°zek */
        .gift-wrapper {
            position: relative;
            width: 100%; /* Rozta≈æen√≠ p≈ôes celou ≈°√≠≈ôku */
            line-height: 0;
        }

        /* Obr√°zek se p≈ôizp≈Øsob√≠ ≈°√≠≈ôce okna */
        .gift-image {
            width: 100%;
            height: auto; /* Zachov√° pomƒõr stran */
            display: block;
        }

        /* Klikateln√© z√≥ny (procenta zaruƒçuj√≠, ≈æe z≈Østanou na m√≠stƒõ) */
        .zone {
            position: absolute;
            box-sizing: border-box;
            border: 2px solid rgba(255, 0, 0, 0.4); /* Viditeln√Ω okraj pro kontrolu */
            background: rgba(255, 0, 0, 0.1);
            cursor: pointer;
            z-index: 10;
            transition: 0.2s;
        }

        .zone.selected {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.3);
        }

        /* UI prvky (cena a QR) pod obr√°zkem nebo jako overlay */
        .ui-overlay {
            padding: 20px;
            background: #262626;
            width: 100%;
            box-sizing: border-box;
            border-top: 2px solid #333;
        }

        .price-display {
            font-size: clamp(2em, 8vw, 4em); /* Dynamick√© p√≠smo podle velikosti okna */
            color: #00ff00;
            font-weight: bold;
            margin: 10px 0;
        }

        #qr-container {
            background: white;
            padding: 15px;
            border-radius: 10px;
            display: none;
            margin: 20px auto;
            width: 200px; /* QR k√≥d z≈Øst√°v√° ƒçiteln√Ω */
        }

        #qrcode img {
            margin: auto;
        }

        .footer { color: #888; font-size: 0.8em; margin-bottom: 30px; }
    </style>
</head>
<body>

<div class="page-container">
    <div style="padding: 15px;">
        <h2 style="margin: 5px 0;">Sestav mi d√°rek! üèéÔ∏è</h2>
        <p style="margin: 0; font-size: 0.9em; color: #bbb;">Klikni na tlaƒç√≠tka p≈ô√≠mo v obr√°zku</p>
    </div>

    <div class="gift-wrapper">
        <img src="volant.jpg" class="gift-image" alt="Fanatec Setup">

        <div class="zone" data-price="1000" style="top: 23%; left: 74%; width: 20%; height: 7%;"></div>
        
        <div class="zone" data-price="500" style="top: 84%; left: 63%; width: 22%; height: 8%;"></div>
    </div>

    <div class="ui-overlay">
        <div class="price-display"><span id="total">0</span> Kƒç</div>
        
        <div id="qr-container">
            <div id="qrcode"></div>
            <p style="color: black; font-size: 11px; margin-top: 8px;">Naskenuj v mobilu</p>
        </div>

        <div class="footer">
            √öƒçet: <strong>CZ11 6210 6701 0022 0036 4123</strong> | Narozeniny
        </div>
    </div>
</div>

<script>
    const zones = document.querySelectorAll('.zone');
    const totalEl = document.getElementById('total');
    const qrContainer = document.getElementById('qr-container');
    const qrcodeDiv = document.getElementById('qrcode');
    
    const IBAN = "CZ1162106701002200364123";
    const MSG = "Narozeniny";

    // Inicializace QR gener√°toru
    const qrGenerator = new QRCode(qrcodeDiv, {
        width: 200,
        height: 200,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.M
    });

    zones.forEach(zone => {
        zone.onclick = function() {
            this.classList.toggle('selected');
            
            let sum = 0;
            document.querySelectorAll('.zone.selected').forEach(s => {
                sum += parseInt(s.getAttribute('data-price'));
            });

            totalEl.innerText = sum;

            if (sum > 0) {
                const spayd = `SPD*1.0*ACC:${IBAN}*AM:${sum}.00*CC:CZK*MSG:${MSG}`;
                qrGenerator.clear(); 
                qrGenerator.makeCode(spayd);
                qrContainer.style.display = 'block';
                // Automatick√Ω scroll dol≈Ø k QR k√≥du na mal√Ωch displej√≠ch
                if(window.innerWidth < 600) qrContainer.scrollIntoView({behavior: "smooth"});
            } else {
                qrContainer.style.display = 'none';
            }
        };
    });
</script>

</body>
</html>
