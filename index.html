<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Fanatec Birthday - Local QR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; margin: 0; padding: 20px; }
        .main-card { max-width: 800px; margin: auto; background: #262626; padding: 20px; border-radius: 15px; }
        .gift-wrapper { position: relative; display: inline-block; width: 100%; line-height: 0; }
        .gift-image { width: 100%; height: auto; border-radius: 8px; }
        
        .zone {
            position: absolute; box-sizing: border-box;
            border: 2px solid rgba(255, 0, 0, 0.5); background: rgba(255, 0, 0, 0.1);
            cursor: pointer; z-index: 100; transition: 0.3s;
        }
        .zone.selected { border-color: #00ff00; background: rgba(0, 255, 0, 0.3); }

        .price-display { font-size: 3em; color: #00ff00; margin: 20px 0; }
        
        /* Box pro QR k√≥d */
        #qr-container { 
            background: white; padding: 20px; border-radius: 10px; 
            display: none; margin: 20px auto; max-width: 256px; 
        }
        #qrcode { margin: auto; } /* Sem se vykresl√≠ QR k√≥d */
        
        .footer { color: #888; font-size: 0.9em; margin-top: 20px; }
    </style>
</head>
<body>

<div class="main-card">
    <h2>Vyber mi ƒç√°st d√°rku! üèéÔ∏è</h2>
    
    <div class="gift-wrapper">
        <img src="obrazek.jpg" class="gift-image" alt="D√°rek">

        <div class="zone" data-price="500" style="top: 20%; left: 42%; width: 25%; height: 40%;"></div>
        <div class="zone" data-price="300" style="top: 60%; left: 15%; width: 30%; height: 30%;"></div>
        <div class="zone" data-price="400" style="top: 35%; left: 65%; width: 25%; height: 35%;"></div>
        <div class="zone" data-price="100" style="top: 30%; left: 45%; width: 5%; height: 10%;"></div>
    </div>

    <div class="price-display"><span id="total">0</span> Kƒç</div>
    
    <div id="qr-container">
        <div id="qrcode"></div>
        <p style="color: black; font-size: 12px; margin-top: 10px;">Naskenuj v bankovn√≠ aplikaci</p>
    </div>

    <div class="footer">
        √öƒçet: <strong>CZ11 6210 6701 0022 0036 4123</strong><br>
        Zpr√°va: <strong>Narozeniny</strong>
    </div>
</div>

<script>
    const zones = document.querySelectorAll('.zone');
    const totalEl = document.getElementById('total');
    const qrContainer = document.getElementById('qr-container');
    const qrcodeDiv = document.getElementById('qrcode');
    
    const IBAN = "CZ1162106701002200364123";
    const MSG = "Narozeniny";

    // Inicializace gener√°toru (knihovna QRCode.js)
    const qrGenerator = new QRCode(qrcodeDiv, {
        width: 256,
        height: 256,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.M
    });

    zones.forEach(zone => {
        zone.onclick = function() {
            this.classList.toggle('selected');
            
            let sum = 0;
            document.querySelectorAll('.zone.selected').forEach(s => {
                sum += parseInt(s.getAttribute('data-price'));
            });

            totalEl.innerText = sum;

            if (sum > 0) {
                // Sestaven√≠ ≈ôetƒõzce podle ƒçesk√©ho standardu SPAYD
                // Form√°t: SPD*1.0*ACC:IBAN*AM:ƒå√ÅSTKA*CC:MƒöNA*MSG:ZPR√ÅVA
                const spayd = `SPD*1.0*ACC:${IBAN}*AM:${sum}.00*CC:CZK*MSG:${MSG}`;
                
                // Vygenerov√°n√≠ k√≥du z ≈ôetƒõzce
                qrGenerator.clear(); 
                qrGenerator.makeCode(spayd);
                
                qrContainer.style.display = 'block';
                console.log("Generuji lok√°ln√≠ QR pro: " + spayd);
            } else {
                qrContainer.style.display = 'none';
            }
        };
    });
</script>

</body>
</html>
